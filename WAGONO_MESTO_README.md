# üöÇ –í–∞–≥–æ–Ω–æ–ú–µ—Å—Ç–æ - –°–µ—Ä–≤–∏—Å –ø–æ–∫—É–ø–∫–∏ –∂–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤

–û–Ω–ª–∞–π–Ω –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è –∂–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤ —Å –≤—ã–±–æ—Ä–æ–º –≤–∞–≥–æ–Ω–∞, –º–µ—Å—Ç–∞, —Å–∏—Å—Ç–µ–º–æ–π —Å–∫–∏–¥–æ–∫ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤.

## üéâ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### üîç –ü–æ–∏—Å–∫ –ø–æ–µ–∑–¥–æ–≤
- –ü–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–µ–∑–¥–æ–≤ –ø–æ –º–∞—Ä—à—Ä—É—Ç—É
- –í—ã–≤–æ–¥ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –ø—Ä–∏–±—ã—Ç–∏—è
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω—ã –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç

### üí´ –í—ã–±–æ—Ä –≤–∞–≥–æ–Ω–∞
- **–ü–ª–∞—Ü–∫–∞—Ä—Ç** (–±–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞) - –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–ª–∫–∏
- **–ö—É–ø–µ** (1.5x —Ü–µ–Ω–∞) - –æ—Ç–¥–µ–ª—å–Ω—ã–π –æ—Ç—Å–µ–∫ –Ω–∞ 4 —á–µ–ª–æ–≤–µ–∫–∞
- **–õ—é–∫—Å** (2x —Ü–µ–Ω–∞) - –ª—é–∫—Å –∫–ª–∞—Å—Å

### üö™ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Å—Ç
- –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –º–µ—Å—Ç –≤ –≤–∞–≥–æ–Ω–µ
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –∏ –∑–∞–Ω—è—Ç—ã—Ö –º–µ—Å—Ç
- –ö–ª–∏–∫ –Ω–∞ –º–µ—Å—Ç–æ –¥–ª—è –≤—ã–±–æ—Ä–∞

### üíµ –°–∏—Å—Ç–µ–º–∞ —Å–∫–∏–¥–æ–∫
- **–î–µ—Ç—Å–∫–∞—è —Å–∫–∏–¥–∫–∞** - 50% —Å–∫–∏–¥–∫–∞ –¥–ª—è –¥–µ—Ç–µ–π –¥–æ 12 –ª–µ—Ç
- **–°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è —Å–∫–∏–¥–∫–∞** - 25% —Å–∫–∏–¥–∫–∞ –ø–æ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–º—É –±–∏–ª–µ—Ç—É
- **–ü–µ–Ω—Å–∏–æ–Ω–Ω–∞—è —Å–∫–∏–¥–∫–∞** - 40% —Å–∫–∏–¥–∫–∞ –¥–ª—è –ø–µ–Ω—Å–∏–æ–Ω–µ—Ä–æ–≤
- **–ë–µ–∑ —Å–∫–∏–¥–∫–∏** - –ø–æ–ª–Ω–∞—è —Ü–µ–Ω–∞

### üìÑ –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –±–∏–ª–µ—Ç
- –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –ø–æ–µ–∑–¥–∫–∏

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
```bash
Python 3.10+
FastAPI
SQLAlchemy
Uvicorn
Pydantic
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç—ç–∫–∞
```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Andrew766938/DASHA_FINAL.git
cd DASHA_FINAL

# –°–æ–∑–¥–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv .venv

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
# Windows
.venv\Scripts\activate
# Linux/Mac
source .venv/bin/activate

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
SECRET_KEY=your_secret_key_here_change_this_in_production_12345678901234567890
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
DB_NAME=wagono_mesto.db
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
uvicorn main:app --reload
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000`

## üöÄ API –ù–∞–≤–∏–≥–∞—Ü–∏—è

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **Swagger UI**: `http://localhost:8000/docs`
- **ReDoc**: `http://localhost:8000/redoc`

## üì¶ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
DASHA_FINAL/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tickets.py          # –ú–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∏–ª–µ—Ç–∞–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.py           # –ú–∞—Ä—à—Ä—É—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tickets.py        # –ú–æ–¥–µ–ª–∏ SQLAlchemy
‚îÇ   ‚îú‚îÄ‚îÄ schemes/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ticket_schemes.py # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ repositories/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ticket_repository.py # –ü—Ä–µ–¥—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ticket_service.py # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.py       # –ö–æ–Ω—Ñ–∏–≥ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.html        # –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îî‚îÄ‚îÄ config.py         # —Å–µ—Ç—Ç–∏–Ω–≥—Å
‚îú‚îÄ‚îÄ main.py               # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt      # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env                  # –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ WAGONO_MESTO_README.md
```

### –ì–ª–∞–≤–Ω—ã–µ API —ç–Ω–¥–ø–æ–π–Ω—Ç—ã

#### –ü–æ–∏—Å–∫
- `GET /api/tickets/trains/search?route_from=...&route_to=...`
- `GET /api/tickets/trains`
- `GET /api/tickets/trains/{train_id}`

#### –í–∞–≥–æ–Ω—ã
- `POST /api/tickets/wagons`
- `GET /api/tickets/trains/{train_id}/wagons`
- `GET /api/tickets/trains/{train_id}/wagons/type/{wagon_type}`
- `GET /api/tickets/wagons/{wagon_id}`

#### –ú–µ—Å—Ç–∞
- `GET /api/tickets/wagons/{wagon_id}/layout`
- `GET /api/tickets/wagons/{wagon_id}/available`

#### –¶–µ–Ω—ã –∏ —Å–∫–∏–¥–∫–∏
- `POST /api/tickets/calculate-price`
- `GET /api/tickets/discounts`

#### –ë–∏–ª–µ—Ç—ã
- `POST /api/tickets/create` - –°–æ–∑–¥–∞—Ç—å –±–∏–ª–µ—Ç
- `GET /api/tickets/ticket/{ticket_id}` - –ü–æ–ª—É—á–∏—Ç—å –±–∏–ª–µ—Ç
- `GET /api/tickets/user/{passenger_email}` - –ú–æ–∏ –±–∏–ª–µ—Ç—ã
- `POST /api/tickets/pay` - –û–ø–ª–∞—Ç–∏—Ç—å
- `GET /api/tickets/ticket/{ticket_id}/pdf` - –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –±–∏–ª–µ—Ç

## üòé –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü–æ–∏—Å–∫ –ø–æ–µ–∑–¥–æ–≤
```bash
curl "http://localhost:8000/api/tickets/trains/search?route_from=–ú–æ—Å–∫–≤–∞&route_to=–ü–µ—Ç–µ—Ä–±—É—Ä–≥"
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –±–∏–ª–µ—Ç–∞
```bash
curl -X POST "http://localhost:8000/api/tickets/create" \
  -H "Content-Type: application/json" \
  -d '{
    "train_id": 1,
    "wagon_id": 1,
    "seat_id": 5,
    "passenger_name": "–ò–≤–∞–Ω –°–∏–¥–æ—Ä–æ–≤",
    "passenger_email": "ivan@example.com",
    "passenger_phone": "+7 999 123 45 67",
    "discount_type": "student"
  }'
```

### 3. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–æ–∏ –±–∏–ª–µ—Ç—ã
```bash
curl "http://localhost:8000/api/tickets/user/ivan@example.com"
```

## ‚ùì –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: FastAPI
- **ORM**: SQLAlchemy
- **Database**: SQLite (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è aiosqlite –¥–ª—è async)
- **Validation**: Pydantic
- **Frontend**: HTML5, CSS3, Vanilla JavaScript
- **API Documentation**: Swagger/OpenAPI

## üíé –ö–ª—é—á–µ–≤—ã–µ —Ñ–∏—á–∏

‚úÖ **Async –æ–ø–µ—Ä–∞—Ü–∏–∏** - —é—Å–Ω–æ—Ç–∞ –≤ —Ä–∞–±–æ—Ç–µ —Å –ë–î  
‚úÖ **CORS** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤  
‚úÖ **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - Models ‚Üí Repositories ‚Üí Services ‚Üí API  
‚úÖ **–ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** - Pydantic —Å—Ö–µ–º—ã  
‚úÖ **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏** –±–∏—Ä–∂–∏

## üìÜ –õ–∏—Ü–µ–Ω–∑–∏—è

EOF
